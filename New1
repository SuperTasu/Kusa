<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ãƒã‚¹é›»å…‰æ²ç¤ºæ¿</title>
  <style>
    body {
      margin: 0;
      background: #000;
      color: #fff;
      font-family: sans-serif;
    }
    .container {
      display: flex;
      height: 100vh;
    }
    .panel {
      flex: 1;
      border-left: 1px solid #444;
      padding: 10px;
      box-sizing: border-box;
    }
    .title {
      font-size: 1.5em;
      margin-bottom: 5px;
    }
    .controls {
      margin-bottom: 10px;
    }
    select, button {
      padding: 5px;
      margin-right: 5px;
      font-size: 1em;
    }
    .bus-line {
      margin: 10px 0;
    }
    .bus-line h4 {
      color: #ffd700;
      margin-bottom: 4px;
    }
    .bus-time {
      font-size: 1.2em;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- ä»Šåœ¨å®¶ç”º -->
    <div class="panel" id="zaike">
      <div class="title">ğŸš ä»Šåœ¨å®¶ç”º</div>
      <div class="controls">
        <select onchange="updateDay('zaike', this.value)">
          <option value="weekday">å¹³æ—¥</option>
          <option value="holiday">åœŸæ—¥</option>
        </select>
        <button onclick="toggleDir('zaike')">å³å› â†” å·¦å›</button>
      </div>
      <div class="bus-info" id="info-zaike"></div>
    </div>

    <!-- å¤¢é‡ç”º3ä¸ç›® / åå€‰ç”º -->
    <div class="panel" id="yume">
      <div class="title">
        ğŸš 
        <select onchange="changeYumeStop(this.value)">
          <option value="å¤¢é‡ç”º3ä¸ç›®">å¤¢é‡ç”º3ä¸ç›®</option>
          <option value="åå€‰ç”º">åå€‰ç”º</option>
        </select>
      </div>
      <div class="controls">
        <select onchange="updateDay('yume', this.value)">
          <option value="weekday">å¹³æ—¥</option>
          <option value="holiday">åœŸæ—¥</option>
        </select>
        <button onclick="toggleDir('yume')">å³å› â†” å·¦å›</button>
      </div>
      <div class="bus-info" id="info-yume"></div>
    </div>

    <!-- é·¹å–å›£åœ°å‰ -->
    <div class="panel" id="takatori">
      <div class="title">ğŸš é·¹å–å›£åœ°å‰</div>
      <div class="controls">
        <select onchange="updateDay('takatori', this.value)">
          <option value="weekday">å¹³æ—¥</option>
          <option value="holiday">åœŸæ—¥</option>
        </select>
        <button onclick="toggleDir('takatori')">å³å› â†” å·¦å›</button>
      </div>
      <div class="bus-info" id="info-takatori"></div>
    </div>
  </div>

  <script>
    // ãƒ†ã‚¹ãƒˆç”¨ã®ç°¡æ˜“æ™‚åˆ»è¡¨ï¼ˆå„åœç•™æ‰€ã€å¹³æ—¥/ä¼‘æ—¥ã€å³å›/å·¦å›ã€ç³»çµ±ã”ã¨ï¼‰
    const timetable = {
      zaike: {
        weekday: {
          right: {
            "3": ['06:35', '07:03', '07:15', '07:27', '07:39', '07:51', '08:05', '08:35', '09:34', '10:34',
            "22": ["08:20", "08:40", "09:00"]
          },
          left: {
            "11": ["08:15", "08:35", "08:55", "09:15"],
            "22": ["08:25", "08:45", "09:05"]
          }
        },
        holiday: {
          right: {
            "11": ["09:00", "09:20", "09:40"],
            "22": ["09:10", "09:30", "09:50"]
          },
          left: {
            "11": ["09:05", "09:25", "09:45"],
            "22": ["09:15", "09:35", "09:55"]
          }
        }
      },
      yume: {},
      takatori: {}
    };

    // ä»–ã®åœç•™æ‰€ã¯åŒã˜ãƒ‡ãƒ¼ã‚¿ã§åˆæœŸåŒ–
    timetable.yume = JSON.parse(JSON.stringify(timetable.zaike));
    timetable.takatori = JSON.parse(JSON.stringify(timetable.zaike));

    // å„åœç•™æ‰€ã®çŠ¶æ…‹ï¼ˆå¹³æ—¥/ä¼‘æ—¥ã€å³å›/å·¦å›ã€è¡¨ç¤ºåï¼‰
    const stopState = {
      zaike: { day: 'weekday', dir: 'right' },
      yume: { day: 'weekday', dir: 'right', name: 'å¤¢é‡ç”º3ä¸ç›®' },
      takatori: { day: 'weekday', dir: 'right' }
    };

    // ç¾åœ¨æ™‚åˆ»ã®HH:MMã‚’è¿”ã™
    function getCurrentTime() {
      const now = new Date();
      return now.getHours().toString().padStart(2, '0') + ':' +
             now.getMinutes().toString().padStart(2, '0');
    }

    // æ¬¡ã®2ä¾¿ï¼ˆå…ˆç™ºãƒ»æ¬¡ç™ºï¼‰ã‚’å–å¾—
    function getNextBuses(times, current) {
      const result = times.filter(t => t > current);
      return [result[0] || '--:--', result[1] || '--:--'];
    }

    // è¡¨ç¤ºã‚’æ›´æ–°
    function updateDisplay(stopId) {
      const info = document.getElementById('info-' + stopId);
      const { day, dir } = stopState[stopId];
      const data = timetable[stopId][day][dir];
      const now = getCurrentTime();

      let html = '';
      for (const line in data) {
        const [next, after] = getNextBuses(data[line], now);
        html += `
          <div class="bus-line">
            <h4>ç³»çµ± ${line}</h4>
            <div class="bus-time">å…ˆç™º: ${next}</div>
            <div class="bus-time">æ¬¡ç™º: ${after}</div>
          </div>
        `;
      }
      info.innerHTML = html;
    }

    // å³å›/å·¦å›ã®åˆ‡ã‚Šæ›¿ãˆ
    function toggleDir(stopId) {
      stopState[stopId].dir = (stopState[stopId].dir === 'right') ? 'left' : 'right';
    }

    // å¹³æ—¥/ä¼‘æ—¥ã®åˆ‡ã‚Šæ›¿ãˆ
    function updateDay(stopId, dayType) {
      stopState[stopId].day = dayType;
    }

    // ä¸­å¤®ã®åœç•™æ‰€é¸æŠ
    function changeYumeStop(name) {
      stopState.yume.name = name;
    }

    // ã™ã¹ã¦æ›´æ–°
    function refreshAll() {
      updateDisplay('zaike');
      updateDisplay('yume');
      updateDisplay('takatori');
    }

    // æ¯ç§’æ›´æ–°
    setInterval(refreshAll, 1000);

    // åˆæœŸè¡¨ç¤º
    refreshAll();
  </script>
</body>
</html>
